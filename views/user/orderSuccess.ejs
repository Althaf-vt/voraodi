<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VOGUE - Order Confirmation</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="/user/orderSuccessStyle.css">
    <link rel="stylesheet" href="/user/footerStyle.css">
</head>
<body>
    <%- include('../../views/partials/user/header') %>

    <div class="order-success-container">
        <div class="order-success-content">
            <!-- Confirmation Header -->
            <div class="confirmation-header">
                <div class="confirmation-icon">
                    <i data-lucide="check-circle"></i>
                </div>
                <h1>Order Confirmed</h1>
                <p class="confirmation-message">Thank you for shopping with VOGUE</p>
                <div class="delivery-info">
                    <div class="delivery-estimate">
                        <i data-lucide="truck"></i>
                        <span>Estimated Delivery: <strong><%= new Date(order.invoiceDate).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' }) %></strong></span>
                    </div>
                    <div class="order-number">
                        <i data-lucide="hash"></i>
                        <span>Order #<%= order.orderId %></span>
                    </div>
                </div>
            </div>

            <!-- Order Summary Grid -->
            <div class="summary-grid">
                <div class="summary-card">
                    <div class="card-header">
                        <i data-lucide="file-text"></i>
                        <h2>Order Summary</h2>
                    </div>
                    
                    <div class="card-body">
                        <div class="summary-item">
                            <span>Order Date</span>
                            <span><%= new Date(order.invoiceDate).toLocaleDateString() %></span>
                        </div>
                        <div class="summary-item">
                            <span>Subtotal</span>
                            <span>₹<%= order.totalPrice.toFixed(2) %></span>
                        </div>
                        <div class="summary-item">
                            <span>Discount</span>
                            <span>-₹<%= order.discount %>.00</span>
                        </div>
                        <div class="summary-item">
                            <span>Delivery</span>
                            <span>₹<%= order.deliveryCharge.toFixed(2) %></span>
                        </div>
                        <div class="summary-item total">
                            <span>Total Paid</span>
                            <span>₹<%= order.finalAmount.toFixed(2) %></span>
                        </div>
                    </div>
                </div>

                <div class="payment-card">
                    <div class="card-header">
                        <i data-lucide="credit-card"></i>
                        <h2>Payment Information</h2>
                    </div>
                    
                    <div class="card-body">
                        <div class="summary-item">
                            <span>Method</span>
                            <span><%= order.paymentMethod.toUpperCase() %></span>
                        </div>
                        <div class="summary-item">
                            <span>Status</span>
                            <span class="status-badge pending">Pending</span>
                        </div>
                        <div class="summary-item">
                            <span>Order Status</span>
                            <span class="status-badge <%= order.status.toLowerCase() %>"><%= order.status %></span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ordered Items -->
            <div class="items-card">
                <div class="card-header">
                    <i data-lucide="package"></i>
                    <h2>Your Items (<%= order.orderedItems.length %>)</h2>
                </div>
                
                <div class="card-body">
                    <% order.orderedItems.forEach(item => { %>
                        <div class="ordered-item">
                            <img src="<%= item.product.productImage[0] %>" alt="<%= item.product.productName %>" class="item-image">
                            <div class="item-details">
                                <h3><%= item.product.productName %></h3>
                                <div class="item-meta">
                                    <span class="item-price">₹<%= item.product.salePrice.toFixed(2) %></span>
                                    <span class="item-quantity">Qty: <%= item.quantity %></span>
                                </div>
                            </div>
                            <div class="item-total">
                                ₹<%= (item.product.salePrice * item.quantity).toFixed(2) %>
                            </div>
                        </div>
                    <% }) %>
                </div>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                <a href="/order-details/<%= order.orderId %>" class="btn track-btn">
                    <i data-lucide="package-search"></i> Track Order
                </a>
                <a href="/" class="btn continue-btn">
                    <i data-lucide="shopping-bag"></i> Continue Shopping
                </a>
            </div>
        </div>
    </div>

    <%- include('../../views/partials/user/footer') %>

    <script>
        lucide.createIcons();
    </script>
</body>
</html>